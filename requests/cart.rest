### Variables
@baseUrl = http://localhost:3001/api

### ============================================
### AUTHENTICATION (Run this first to get token)
### ============================================

### Login to get token
# @name loginResponse
POST {{baseUrl}}/login
Content-Type: application/json

{
  "username": "admin",
  "password": "admin123"
}

### Extract token from login response
@token = {{loginResponse.response.body.data.token}}

### Set these after creating products and adding to cart
@productId = YOUR_PRODUCT_ID_HERE
@itemId = YOUR_CART_ITEM_ID_HERE

### ============================================
### SHOPPING CART
### ============================================

### 1. Get Cart
GET {{baseUrl}}/cart
Authorization: Bearer {{token}}

### 2. Add Item to Cart
# @name addToCart
POST {{baseUrl}}/cart/add
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "productId": "{{productId}}",
  "quantity": 1
}

### 3. Add Item to Cart - Quantity 3
POST {{baseUrl}}/cart/add
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "productId": "{{productId}}",
  "quantity": 3
}

### 4. Add Another Product to Cart
POST {{baseUrl}}/cart/add
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "productId": "ANOTHER_PRODUCT_ID",
  "quantity": 2
}

### 5. Update Cart Item Quantity
PUT {{baseUrl}}/cart/update/{{itemId}}
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "quantity": 5
}

### 6. Update Cart Item - Decrease Quantity
PUT {{baseUrl}}/cart/update/{{itemId}}
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "quantity": 1
}

### 7. Remove Item from Cart
DELETE {{baseUrl}}/cart/remove/{{itemId}}
Authorization: Bearer {{token}}

### 8. Clear Cart
DELETE {{baseUrl}}/cart/clear
Authorization: Bearer {{token}}

### 9. Add to Cart - Missing Product ID (400 Test)
POST {{baseUrl}}/cart/add
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "quantity": 1
}

### 10. Add to Cart - Invalid Quantity (400 Test)
POST {{baseUrl}}/cart/add
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "productId": "{{productId}}",
  "quantity": 0
}

### 11. Add to Cart - Invalid Product (404 Test)
POST {{baseUrl}}/cart/add
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "productId": "507f1f77bcf86cd799439011",
  "quantity": 1
}

### 12. Add to Cart - Exceed Stock (400 Test)
POST {{baseUrl}}/cart/add
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "productId": "{{productId}}",
  "quantity": 9999
}

### 13. Update Cart - Invalid Quantity (400 Test)
PUT {{baseUrl}}/cart/update/{{itemId}}
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "quantity": -1
}

### 14. Get Cart - Without Auth (401 Test)
GET {{baseUrl}}/cart
